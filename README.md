
# **Foodgram project**

### Продуктовый помощник

# Описание

**«Продуктовый помощник»** - это сайт, на котором пользователи могут _публиковать_ рецепты, добавлять чужие рецепты в _избранное_ и _подписываться_ на публикации других авторов. Сервис **«Список покупок»** позволяет пользователям создавать список продуктов, которые нужно купить для приготовления выбранных блюд.
 
# Функционал

Функциональность проекта
- Проект доступен по IP или доменному имени.
- Все сервисы и страницы доступны для пользователей в соответствии с их правами. 
- Рецепты на всех страницах сортируются по дате публикации (новые — выше).
- Работает фильтрация по тегам, в том числе на странице избранного и на странице рецептов одного автора).
- Работает пагинатор (в том числе при фильтрации по тегам).
- Исходные данные предзагружены; добавлены тестовые пользователи и рецепты.
# Для авторизованных пользователей:
- Доступна главная страница.
- Доступна страница другого пользователя.
- Доступна страница отдельного рецепта.
  ### Доступна страница «Мои подписки».
      1. Можно подписаться и отписаться на странице рецепта.
      2. Можно подписаться и отписаться на странице автора.
      3. При подписке рецепты автора добавляются на страницу «Мои подписки» и удаляются оттуда при отказе от подписки.
  ### Доступна страница «Избранное».
      1. На странице рецепта есть возможность добавить рецепт в список избранного и удалить его оттуда.
      2. На любой странице со списком рецептов есть возможность добавить рецепт в список избранного и удалить его оттуда.
  ### Доступна страница «Список покупок».
      1. На странице рецепта есть возможность добавить рецепт в список покупок и удалить его оттуда.
      2. На любой странице со списком рецептов есть возможность добавить рецепт в список покупок и удалить его оттуда.
      3. Есть возможность выгрузить файл (.txt или .pdf) с перечнем и количеством необходимых ингредиентов для рецептов из «Списка покупок».
      4. Ингредиенты в выгружаемом списке не повторяются, корректно подсчитывается общее количество для каждого ингредиента.
  ### Доступна страница «Создать рецепт».
      1. Есть возможность опубликовать свой рецепт.
      2. Есть возможность отредактировать и сохранить изменения в своём рецепте.
      3. Есть возможность удалить свой рецепт.
- Доступна и работает форма изменения пароля.
- Доступна возможность выйти из системы (разлогиниться).
# Для неавторизованных пользователей
- Доступна главная страница.
- Доступна страница отдельного рецепта.
- Доступна и работает форма авторизации.
- Доступна и работает система восстановления пароля.
- Доступна и работает форма регистрации.
# Администратор и админ-зона
- Все модели выведены в админ-зону.
- Для модели пользователей включена фильтрация по имени и email.
- Для модели рецептов включена фильтрация по названию, автору и тегам.
- На админ-странице рецепта отображается общее число добавлений этого рецепта в избранное.
- Для модели ингредиентов включена фильтрация по названию.
# Инфраструктура
- Проект работает с СУБД PostgreSQL.
- Проект запущен на сервере в Яндекс.Облаке в трёх контейнерах: nginx, PostgreSQL и Django+Gunicorn. Заготовленный контейнер с фронтендом используется для сборки файлов.
- Контейнер с проектом обновляется на Docker Hub.
- В nginx настроена раздача статики, запросы с фронтенда переадресуются в контейнер с Gunicorn. Джанго-админка работает напрямую через Gunicorn.
- Данные сохраняются в volumes.

# Технологии

- Python 3.9
- Django 3.2
- Django Rest Framework 3.14.0
- PostgreSQL 13.0
- gunicorn
- nginx

# Контейнер

- Docker
- Docker Compose

# URL's

- foodgram-safar.ddns.net
- foodgram-safar.ddns.net/admin
- foodgram-safar.ddns.net/api

# Админ-панель

Данные для доступа в админ-панель:

email: Vv

password: 123Rushan

# Локальная установка

Клонируйте репозиторий и перейдите в него в командной строке:
```sh
git clone git@github.com:Safarrush/foodgram-project-react.git && cd foodgram-project-react
```
Перейдите в директорию с файлом _Dockerfile_ и запустите сборку образа:
```sh
cd backend/foodgram/ && docker build -t <DOCKER_USERNAME>/foodgram:<tag> .
```
Перейдите в директорию с файлом _docker-compose.yaml_:
```sh
cd ../../infra
```
Создайте .env файл:
```sh
#.env
DB_ENGINE=<django.db.backends.postgresql>
DB_NAME=<имя базы данных postgres>
DB_USER=<пользователь бд>
DB_PASSWORD=<пароль>
DB_HOST=<db>
DB_PORT=<5432>
SECRET_KEY=<секретный ключ проекта django>
```
Запустите контейнеры:
```sh
docker-compose up -d --build
```
После успешного запуска контейнеров выполните миграции в проекте:
```sh
docker-compose exec backend python manage.py makemigrations users
```
```sh
docker-compose exec backend python manage.py makemigrations recipes
```
```sh
docker-compose exec backend python manage.py migrate
```
Создайте суперпользователя:
```sh
docker-compose exec backend python manage.py createsuperuser
```
Соберите статику:
```sh
docker-compose exec backend python manage.py collectstatic --no-input
```
Документация будет доступна по адресу: http://localhost/api/docs/

# Об авторе
- Сафаргалеев Рушан
- Python-разработчик (Backend)
- Россия, г. Уфа
- E-mail: safargaleevrushan@yandex.ru
- Telegram: @safa_ru
